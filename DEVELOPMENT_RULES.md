# –ü—Ä–∞–≤–∏–ª–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ DLSD Evidence Collector

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–û

**–ù–ï –°–¢–í–û–†–Æ–í–ê–¢–ò –ù–û–í–Ü PYTHON –§–ê–ô–õ–ò –ë–ï–ó –£–ó–ì–û–î–ñ–ï–ù–ù–Ø**

–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏ **–§–Ü–ö–°–û–í–ê–ù–ê**. –í—Å—ñ –∑–º—ñ–Ω–∏ —Ç—ñ–ª—å–∫–∏ –≤ —Ä–∞–º–∫–∞—Ö —ñ—Å–Ω—É—é—á–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏.

---

## üìÅ –ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
DLSD/
‚îú‚îÄ‚îÄ main.py                     # ‚úÖ CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å - –û–°–ù–û–í–ù–ò–ô –§–ê–ô–õ
‚îú‚îÄ‚îÄ config.py                   # ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è - –ù–ï –ó–ú–Ü–ù–Æ–í–ê–¢–ò –°–¢–†–£–ö–¢–£–†–£
‚îú‚îÄ‚îÄ auth.py                     # ‚úÖ Google Sheets –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ requirements.txt            # ‚úÖ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ .env                        # ‚úÖ API –∫–ª—é—á—ñ (–ù–ï –ö–û–ú–Ü–¢–¨!)
‚îú‚îÄ‚îÄ credentials.json            # ‚úÖ Google Service Account (–ù–ï –ö–û–ú–Ü–¢–¨!)
‚îú‚îÄ‚îÄ modules/                    # ‚úÖ AI —Ç–∞ –æ—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ multi_ai_client.py     # ‚úÖ Multi-AI (OpenAI, Claude, Gemini)
‚îÇ   ‚îú‚îÄ‚îÄ search.py              # ‚úÖ PubMed —Ç–∞ –ø–æ—à—É–∫ –¥–∂–µ—Ä–µ–ª
‚îÇ   ‚îî‚îÄ‚îÄ processors.py          # ‚úÖ Batch –æ–±—Ä–æ–±–∫–∞ —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç
‚îú‚îÄ‚îÄ processes/                  # ‚úÖ 9-–µ—Ç–∞–ø–Ω–∏–π –Ω–∞—É–∫–æ–≤–∏–π –ø–∞–π–ø–ª–∞–π–Ω
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py             # ‚úÖ JSON Schema –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ source_policy.py       # ‚úÖ L1-L4 –ø–æ–ª—ñ—Ç–∏–∫–∞ –¥–∂–µ—Ä–µ–ª
‚îÇ   ‚îú‚îÄ‚îÄ normalizer.py          # ‚úÖ Stage 0: –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ searcher.py            # ‚úÖ Stage 1: –ü–æ—à—É–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ judge.py               # üöß Stage 2: –†–∞–Ω–≥—É–≤–∞–Ω–Ω—è –¥–∂–µ—Ä–µ–ª
‚îÇ   ‚îú‚îÄ‚îÄ extractor.py           # üöß Stage 4: –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ validator.py           # üöß Stage 5: –í–∞–ª—ñ–¥–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ formatter.py           # üöß Stage 7: UA —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
‚îî‚îÄ‚îÄ output/                     # ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏
```

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –ì–æ—Ç–æ–≤–æ —Ç–∞ –ø—Ä–∞—Ü—é—î
- üöß –í —Ä–æ–∑—Ä–æ–±—Ü—ñ (–¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π –¥–æ —ñ—Å–Ω—É—é—á–∏—Ö —Ñ–∞–π–ª—ñ–≤)

---

## üéØ –ü—Ä–∞–≤–∏–ª–∞ –≤–Ω–µ—Å–µ–Ω–Ω—è –∑–º—ñ–Ω

### ‚úÖ –î–û–ó–í–û–õ–ï–ù–û:
1. **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –º–æ–¥—É–ª—ñ–≤** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –¥–æ –∫–ª–∞—Å—ñ–≤
2. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π** - –∑–º—ñ–Ω–∏ –≤ `config.py`
3. **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏** - –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
4. **–î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤** - —Ç—ñ–ª—å–∫–∏ –≤ `processes/` (judge.py, extractor.py, etc.)
5. **CLI –∫–æ–º–∞–Ω–¥–∏** - —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è `main.py`

### ‚ùå –ó–ê–ë–û–†–û–ù–ï–ù–û:
1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö .py —Ñ–∞–π–ª—ñ–≤** –±–µ–∑ —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è
2. **–ó–º—ñ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π**
3. **–î—É–±–ª—é–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ** –º—ñ–∂ –º–æ–¥—É–ª—è–º–∏
4. **–ü–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—É —î–¥–∏–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**
5. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏—Ö entry points**

---

## üìã –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ –º–∞–ø–∞ –º–æ–¥—É–ª—ñ–≤

### `main.py` - –Ñ–¥–∏–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
- CLI –∫–æ–º–∞–Ω–¥–∏: setup, test, process, export
- –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è 9-–µ—Ç–∞–ø–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω—É
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Sheets
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è workflow

### `config.py` - –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
- API –∫–ª—é—á—ñ (OpenAI, Claude, Gemini, NCBI)
- –ú–æ–¥–µ–ª—ñ —Ç–∞ —ó—Ö –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏
- Google Sheets –º–∞–ø—ñ–Ω–≥ (–∫–æ–ª–æ–Ω–∫–∏ A-S)
- –†—ñ–≤–Ω—ñ –¥–æ–≤—ñ—Ä–∏ –¥–∂–µ—Ä–µ–ª L1-L4

### `auth.py` - –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
- Google Sheets API –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- Service Account –∫–µ—Ä—É–≤–∞–Ω–Ω—è
- –ß–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ –∞—Ä–∫—É—à—ñ–≤

### `modules/multi_ai_client.py` - AI —è–¥—Ä–æ
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
- OpenAI, Claude, Gemini –∫–ª—ñ—î–Ω—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π fallback –º—ñ–∂ –º–æ–¥–µ–ª—è–º–∏
- –°–∏—Å—Ç–µ–º–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏ –¥–ª—è –Ω–∞—É–∫–æ–≤–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è API –≤–∏–∫–ª–∏–∫–∞–º–∏

### `modules/search.py` - –ü–æ—à—É–∫ –¥–∂–µ—Ä–µ–ª
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
- PubMed E-utilities API
- Multi-source –ø–æ—à—É–∫
- Rate limiting —Ç–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è

### `modules/processors.py` - Batch –æ–±—Ä–æ–±–∫–∞
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:**
- Batch processing –ª–æ–≥—ñ–∫–∞
- –ï–∫—Å–ø–æ—Ä—Ç —É CSV/JSONL
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- Error handling —Ç–∞ retry

### `processes/` - –ù–∞—É–∫–æ–≤—ñ –∞–≥–µ–Ω—Ç–∏
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –ö–æ–∂–µ–Ω —Ñ–∞–π–ª = –æ–¥–∏–Ω –µ—Ç–∞–ø –ø–∞–π–ø–ª–∞–π–Ω—É
- `schemas.py` - JSON Schema –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- `source_policy.py` - L1-L4 –ø–æ–ª—ñ—Ç–∏–∫–∞ –¥–∂–µ—Ä–µ–ª
- `normalizer.py` - Stage 0: –¢–∞–∫—Å–æ–Ω–æ–º—ñ—á–Ω–∞ –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è
- `searcher.py` - Stage 1: –ü–æ—à—É–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤
- `judge.py` - Stage 2: –†–∞–Ω–≥—É–≤–∞–Ω–Ω—è —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
- `extractor.py` - Stage 4: –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ —Ü–∏—Ç–∞—Ç–∞–º–∏
- `validator.py` - Stage 5: DOI/PMID/URL –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- `formatter.py` - Stage 7: –£–∫—Ä–∞—ó–Ω—Å—å–∫–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è

---

## üîß –ü—Ä–æ—Ü–µ—Å —Ä–æ–∑—Ä–æ–±–∫–∏

### –ü–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–Ω—è–º –∑–º—ñ–Ω:
1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏** - —á–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –Ω–æ–≤–∏–π —Ñ–∞–π–ª, –∞–±–æ –º–æ–∂–Ω–∞ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π
2. **–û–±–≥–æ–≤–æ—Ä–∏—Ç–∏** - —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
3. **–î–æ—Ç—Ä–∏–º–∞—Ç–∏—Å—è** - –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ —Å–∏—Å—Ç–µ–º–∏

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó:
1. **–í–∏–∑–Ω–∞—á–∏—Ç–∏** - –≤ —è–∫–∏–π —ñ—Å–Ω—É—é—á–∏–π –º–æ–¥—É–ª—å –¥–æ–¥–∞—Ç–∏
2. **–†–æ–∑—à–∏—Ä–∏—Ç–∏** - –∫–ª–∞—Å –∞–±–æ –¥–æ–¥–∞—Ç–∏ –º–µ—Ç–æ–¥
3. **–û–Ω–æ–≤–∏—Ç–∏** - –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
4. **–ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏** - –∑ —ñ—Å–Ω—É—é—á–∏–º workflow

### –ü—Ä–∏–∫–ª–∞–¥ –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –ø—ñ–¥—Ö–æ–¥—É:
```python
# ‚úÖ –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥—É –≤ —ñ—Å–Ω—É—é—á–∏–π –∫–ª–∞—Å
# modules/multi_ai_client.py
class MultiAIClient:
    def new_specialized_method(self):
        # –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
        pass
```

### –ü—Ä–∏–∫–ª–∞–¥ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ì–û –ø—ñ–¥—Ö–æ–¥—É:
```python
# ‚ùå –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª—É
# modules/new_specialized_client.py  # –ù–ï –†–û–ë–ò–¢–ò!
```

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏

1. **Single Responsibility** - –∫–æ–∂–µ–Ω –º–æ–¥—É–ª—å –º–∞—î –æ–¥–Ω—É —á—ñ—Ç–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
2. **Dependency Injection** - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ `config.py`
3. **Error Handling** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ `processors.py`
4. **Modularity** - –ø—Ä–æ—Ü–µ—Å–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ, –∞–ª–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ
5. **Testability** - –∫–æ–∂–µ–Ω –µ—Ç–∞–ø –º–æ–∂–Ω–∞ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ

---

## üìù –ö–æ–º—ñ—Ç-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

–§–æ—Ä–º–∞—Ç: `[–º–æ–¥—É–ª—å] –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å –∑–º—ñ–Ω`

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
- `[processes] Add judge.py Stage 2 ranking logic`
- `[config] Update model priorities for scientific validation`
- `[main] Add new CLI command for quality assurance`
- `[multi_ai] Improve fallback handling between models`

---

## üö® –ü–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª

–Ø–∫—â–æ –≤–∏—è–≤–ª–µ–Ω–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:
1. **–ù–µ –º–µ—Ä–∂–∏—Ç–∏** –∫–æ–¥ –¥–æ –æ—Å–Ω–æ–≤–Ω–æ—ó –≥—ñ–ª–∫–∏
2. **–û–±–≥–æ–≤–æ—Ä–∏—Ç–∏** –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç–∏** –ø—ñ–¥ —ñ—Å–Ω—É—é—á—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É
4. **–û–Ω–æ–≤–∏—Ç–∏** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ